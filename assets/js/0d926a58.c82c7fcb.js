"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6962],{7493:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>l});var t=n(74848),a=n(28453);const s={title:"Harbor Pluggable Scanner Module",taxonomy:{category:"docs"},slug:"/scanning/registry/harbor"},i=void 0,o={id:"scanning/registry/harbor/harbor",title:"Harbor Pluggable Scanner Module",description:"Scanning Harbor Registries Using the Pluggable Scanner",source:"@site/docs/06.scanning/02.registry/01.harbor/01.harbor.md",sourceDirName:"06.scanning/02.registry/01.harbor",slug:"/scanning/registry/harbor",permalink:"/next/scanning/registry/harbor",draft:!1,unlisted:!1,editUrl:"https://github.com/neuvector/docs/edit/main/docs/06.scanning/02.registry/01.harbor/01.harbor.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Harbor Pluggable Scanner Module",taxonomy:{category:"docs"},slug:"/scanning/registry/harbor"},sidebar:"tutorialSidebar",previous:{title:"Registry Scanning Configuration",permalink:"/next/scanning/registry"},next:{title:"ECR Scanning using IAM Roles",permalink:"/next/scanning/registry/ecr-iam"}},c={},l=[{value:"Scanning Harbor Registries Using the Pluggable Scanner",id:"scanning-harbor-registries-using-the-pluggable-scanner",level:3},{value:"Deploying the NeuVector Registry Adapter",id:"deploying-the-neuvector-registry-adapter",level:4},{value:"Scanning Images from a Harbor Registry",id:"scanning-images-from-a-harbor-registry",level:4},{value:"Sample Deployment Yaml",id:"sample-deployment-yaml",level:4}];function g(e){const r={a:"a",admonition:"admonition",h3:"h3",h4:"h4",img:"img",p:"p",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h3,{id:"scanning-harbor-registries-using-the-pluggable-scanner",children:"Scanning Harbor Registries Using the Pluggable Scanner"}),"\n",(0,t.jsxs)(r.p,{children:["NeuVector supports invoking the NeuVector scanner from Harbor registries through the ",(0,t.jsx)(r.a,{href:"https://github.com/goharbor/pluggable-scanner-spec",children:"pluggable scanner"})," interface. This requires configuration of the connection to the controller (exposed API). The Harbor adapter calls controller endpoint to trigger a scan, which can scan automatically on push. Interrogation services can be used for periodic scans. Scan results from Federation Primary controllers ARE propagated to remote clusters."]}),"\n",(0,t.jsx)(r.admonition,{type:"note",children:(0,t.jsx)(r.p,{children:"There is an issue with the HTTPS based adapter endpoint error: please ignore Test Connection error, it does work even though an error is shown (skip certificate validation)."})}),"\n",(0,t.jsx)(r.h4,{id:"deploying-the-neuvector-registry-adapter",children:"Deploying the NeuVector Registry Adapter"}),"\n",(0,t.jsxs)(r.p,{children:["The 5.2 Helm chart contains options to deploy the ",(0,t.jsx)(r.a,{href:"https://github.com/neuvector/neuvector-helm/blob/master/charts/core/templates/registry-adapter.yaml",children:"registry adapter"})," for Harbor. It can also be pulled manually from the neuvector/registry-adapter repo on Docker Hub. Options also include setting the Harbor registry request protocol and the basic authentication secret name."]}),"\n",(0,t.jsx)(r.p,{children:"After deployment of the adapter, it is necessary to configure this in Harbor."}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{alt:"Harbor",src:n(49581).A+"",width:"446",height:"437"})}),"\n",(0,t.jsx)(r.p,{children:"The adapter endpoint must be entered, and the adapter connects to the controller, which is typically exposed as a service externally so the adapter can connect to it. In addition, authentication credentials for a valid NeuVector user must be entered."}),"\n",(0,t.jsx)(r.h4,{id:"scanning-images-from-a-harbor-registry",children:"Scanning Images from a Harbor Registry"}),"\n",(0,t.jsx)(r.p,{children:"After successful deployment and connection to a controller, an image scan can be manually or automatically triggered from Harbor."}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{alt:"Harbor",src:n(27810).A+"",width:"1890",height:"916"})}),"\n",(0,t.jsx)(r.p,{children:"Periodic scans (scheduled) can be configured through Interrogation Services in Harbor, to make sure the latest CVE database is used to rescan images in registries."}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{alt:"Harbor",src:n(38028).A+"",width:"802",height:"488"})}),"\n",(0,t.jsx)(r.p,{children:"Scan results can be viewed directly in Harbor."}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{alt:"results",src:n(61065).A+"",width:"1900",height:"698"})}),"\n",(0,t.jsx)(r.h4,{id:"sample-deployment-yaml",children:"Sample Deployment Yaml"}),"\n",(0,t.jsxs)(r.p,{children:["Samples for ",(0,t.jsx)(r.a,{href:"https://raw.githubusercontent.com/neuvector/manifests/main/kubernetes/5.3.0/neuvector-registry-adapter-k8s.yaml",children:"Kubernetes"})," and ",(0,t.jsx)(r.a,{href:"https://raw.githubusercontent.com/neuvector/manifests/main/kubernetes/5.3.0/neuvector-registry-adapter-oc.yaml",children:"OpenShift"})]})]})}function d(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(g,{...e})}):g(e)}},27810:(e,r,n)=>{n.d(r,{A:()=>t});const t=n.p+"assets/images/2_Scan_image-4de5a3ef867e3552762f13022604d577.png"},61065:(e,r,n)=>{n.d(r,{A:()=>t});const t=n.p+"assets/images/3_scanresults-f10219358f7678069e2f712d52c275e4.png"},38028:(e,r,n)=>{n.d(r,{A:()=>t});const t=n.p+"assets/images/4_interrogation-3044b1258fb86be1c1e203d6b2fabfc8.png"},49581:(e,r,n)=>{n.d(r,{A:()=>t});const t=n.p+"assets/images/5_2_adapter_configuration-677566095def084bdddc32db687a62e8.png"},28453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>o});var t=n(96540);const a={},s=t.createContext(a);function i(e){const r=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(s.Provider,{value:r},e.children)}}}]);